<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org" th:fragment="dynamic(main)">

<head>

	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Watch shop</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<!-- Boostrap -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"></script>
	<!-- route -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<!-- Angular -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-route.js"></script>
	<link rel="stylesheet" href="/assets/css/admin.css" type="text/css">
	<link rel="stylesheet" href="/assets/css/adminform.css" type="text/css">

	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="https://d3js.org/d3.v6.min.js"></script>

	<style type="text/css">
		.button_scroll2top {
			display: none;
			width: 30px;
			height: 30px;
			padding-top: 10px;
			padding-left: 10px;
			position: fixed;
			z-index: 950;
			right: 19px;
			top: 90%;
			background: #fb3;
			border-radius: 999px;
			cursor: pointer;
			font-size: 2rgb(0, 0, 0);
		}

		.button_scroll2top:hover {
			opacity: 1.0;
		}
	</style>
	</style>
</head>

<body>
	<div class="be-wrapper be-fixed-sidebar">

		<nav class="navbar navbar-expand fixed-top be-top-header">
			<div class="container-fluid">
				<div class="be-navbar-header">
					<!-- Logo -->
					<div class="logo">
						<a href="/home/main"><img src="/assets/img/logo/logo.png" alt="" style="margin-left: 30px"></a>
					</div>
				</div>
				<div class="page-title">
					<span>Dashboard</span>
				</div>
				<h4>Welcom,[[${#request.remoteUser}]]</h4>
				<div class="be-right-navbar">
					<ul class="nav navbar-nav float-right be-user-nav">
						<li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href="#"
								data-toggle="dropdown" role="button" aria-expanded="false"><img
									src="/assets/img/gallery/gallery5.jpg" alt="Avatar"><span
									class="user-name">[[${#request.remoteUser}]]</span></a>
							<div class="dropdown-menu" role="menu">
								<div class="user-info">
									<div class="user-name">[[${#request.remoteUser}]]</div>
									<div class="user-position online">Available</div>
								</div>
								<a class="dropdown-item" href="/home/account"><span
										class="icon mdi mdi-face"></span>Account</a><a class="dropdown-item"
									href="/security/logoff"><span class="icon mdi mdi-power"></span>Logout</a>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<div class="be-left-sidebar">
			<div class="left-sidebar-wrapper">
				<a class="left-sidebar-toggle" href="#">Dashboard</a>
				<div class="left-sidebar-spacer">
					<div class="left-sidebar-scroll">
						<div class="left-sidebar-content">
							<ul class="sidebar-elements">
								<li class="divider">Menu</li>
								<li class="active"><a href="index"><i
											class="icon mdi mdi-home"></i><span>Dashboard</span></a></li>
								<th:block th:if="${#request.isUserInRole('DIR')}">
									<li class="active"><a th:href="@{|/admin/staff|}"><i
												class="icon mdi mdi-home"></i><span>Staff</span></a></li>
								</th:block>
								<li class="active"><a th:href="@{|/admin/orders|}"><i
											class="icon mdi mdi-home"></i><span>Orders</span></a></li>
								<li class="active"><a href="statistical"><i
											class="icon mdi mdi-home"></i><span>Statistical</span></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="be-content">
			<div class="main-content container-fluid">
				<div class="row">
					<div class="col-12 col-lg-9 col-xl-3">
						<div class="widget widget-tile">
							<div class="chart sparkline" id="spark1"></div>
							<div class="data-info">
								<div class="desc">New Users</div>
								<div class="value">
									<span class="indicator indicator-equal mdi mdi-chevron-right"></span><span
										class="number" data-toggle="counter" data-end="113">[[${totalAccount}]]</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-lg-9 col-xl-3">
						<div class="widget widget-tile">
							<div class="chart sparkline" id="spark2"></div>
							<div class="data-info">
								<div class="desc">Total Order</div>
								<div class="value">
									<span class="indicator indicator-positive mdi mdi-chevron-up"></span><span
										class="number" data-toggle="counter" data-end="80"
										data-suffix="%">[[${totalOrder}]]</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-lg-9 col-xl-3">
						<div class="widget widget-tile">
							<div class="chart sparkline" id="spark3"></div>
							<div class="data-info">
								<div class="desc">Products Sold</div>
								<div class="value">
									<span class="indicator indicator-positive mdi mdi-chevron-up"></span><span
										class="number" data-toggle="counter"
										data-end="532">[[${totalProductsSold}]]</span>
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-lg-9 col-xl-3">
						<div class="widget widget-tile">
							<div class="chart sparkline" id="spark4"></div>
							<div class="data-info">
								<div class="desc">Total Revenue</div>
								<div class="value">
									<span class="indicator indicator-negative mdi mdi-chevron-down"></span><span
										class="number" data-toggle="counter"
										data-end="113">[[${#numbers.formatDecimal(totalRevenue,2,'COMMA',0,'POINT')}]]
										VND</span>
								</div>
							</div>
						</div>
					</div>
				</div>

				<ul class="nav nav-tabs" id="myTab" role="tablist">
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile"
							type="button" role="tab" aria-controls="profile" aria-selected="false"> Products
							sold</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact"
							type="button" role="tab" aria-controls="contact" aria-selected="false">Tolal
							Revenue</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button"
							role="tab" aria-controls="user" aria-selected="false">Customer Information</button>
					</li>
					<li class="nav-item" role="presentation">
						<button class="nav-link" id="sales-tab" data-bs-toggle="tab" data-bs-target="#sales"
							type="button" role="tab" aria-controls="sales" aria-selected="false">Sales of Day</button>
					</li>
				</ul>
				<div class="tab-content" id="myTabContent">
					<div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
						<div class="col-12 col-lg-12">
							<div class="card card-table">
								<div class="card-header">
									<div class="title" style="color:#005500">
										<h1>Statistical Products</h1>
									</div>
								</div>
								<div class="card-body table-responsive">
									<table class=" table table-striped table-borderless">
										<thead>
											<tr>
												<th style="width: 20%;">ID</th>
												<th style="width: 60%;">Name</th>
												<th style="width: 40%">Quantity </th>
												<th class="actions" style="width: 0;"></th>
											</tr>
										</thead>
										<tbody class="no-border-x" th:each="result:${countProductSold}">
											<td class="w-20">
												<div class="d-flex px-0 py-0 ">
													<div class="ms-1">
														<h6 class="text-sm mb-0" th:text="${result[0]}"></h6>
													</div>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div>
													<h6 class="text-sm mb-1" th:text="${result[1]}"></h6>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div class="">
													<h6 class="text-sm mb-0" th:text="${result[2]}"></h6>
												</div>
											</td>
											</tr>
									</table>
								</div>
							</div>
							<canvas id="countProductSold" width="100" height="50"></canvas>
						</div>
					</div>
					<div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
						<div class="col-12 col-lg-12">
							<div class="card card-table">
								<div class="card-header">
									<div class="title">
										<h1 style="color:#005500">Revenue Per Product</h1>
									</div>
								</div>
								<div class="card-body table-responsive">
									<table class=" table table-striped table-borderless">
										<thead>
											<tr>
												<th style="width: 20%;">ID</th>
												<th style="width: 60%;">Name</th>
												<th style="width: 40%">Total revenue</th>
												<th class="actions" style="width: 0;"></th>
											</tr>
										</thead>
										<tbody class="no-border-x" th:each="result:${revenuePerProduct}">
											<td class="w-20">
												<div class="d-flex px-0 py-0 ">
													<div class="ms-1">
														<h6 class="text-sm mb-0" th:text="${result[0]}"></h6>
													</div>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div>
													<h6 class="text-sm mb-1" th:text="${result[1]}"></h6>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div class="">
													<h6 class="text-sm mb-0">
														[[${#numbers.formatDecimal(result[2],2,'COMMA',0,'POINT')}]] VND
													</h6>
												</div>
											</td>
											</tr>
									</table>
								</div>
							</div>
							<canvas id="getRevenuePerProduct" width="100" height="50"></canvas>
						</div>
					</div>
					<div class="tab-pane fade" id="user" role="tabpanel" aria-labelledby="user-tab">
						<div class="col-12 col-lg-12">
							<div class="card card-table">
								<div class="card-header">
									<div class="title" style="color:#005500">
										<h1>Statistical Customer</h1>
									</div>
								</div>
								<div class="card-body table-responsive">
									<table class=" table table-striped table-borderless">
										<thead>
											<tr>
												<th style="width: 25%;">Username</th>
												<th style="width: 25%;">Fullname</th>
												<th style="width: 25%">Quantity</th>
												<th style="width: 25%">Total</th>
												<th class="actions" style="width: 0;"></th>
											</tr>
										</thead>
										<tbody class="no-border-x" th:each="result:${totalAmountPaid}">
											<td class="w-20">
												<div class="d-flex px-0 py-0 ">
													<div class="ms-1">
														<h5 class="text-sm mb-0" th:text="${result[0]}"></h5>
													</div>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div>
													<h5 class="text-sm mb-1" th:text="${result[1]}"></h5>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div class="">
													<h5 class="text-sm mb-0" th:text="${result[2]}"></h5>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div class="">
													<h5 class="text-sm mb-0">
														[[${#numbers.formatDecimal(result[3],2,'COMMA',0,'POINT')}]] VND
													</h5>
												</div>
											</td>
											</tr>
									</table>
								</div>
							</div>
							<canvas id="totalAmountPaid" width="100" height="50"></canvas>
						</div>
					</div>
					<div class="tab-pane fade" id="sales" role="tabpanel" aria-labelledby="sales-tab">
						<div class="col-12 col-lg-12">
							<div class="card card-table">
								<div class="card-header">
									<div class="title" style="color:#005500">
										<h1>Sales Statistics for the day</h1>
									</div>
								</div>
								<div class="card-body table-responsive">
									<table class=" table table-striped table-borderless">
										<thead>
											<tr>
												<th style="width: 50%;">Day</th>
												<th style="width: 50%;">Total Revenue</th>

												<th class="actions" style="width: 0;"></th>
											</tr>
										</thead>
										<tbody class="no-border-x" th:each="result:${revenue}">
											<!-- somthing -->
											<td class="w-20">
												<div class="d-flex px-0 py-0 ">
													<div class="ms-1">
														<h5 class="text-sm mb-0" th:text="${result[0]}"></h5>
													</div>
												</div>
											</td>
											<td class="align-middle text-sm-left">
												<div>
													<h5 class="text-sm mb-1">[[${#numbers.formatDecimal(result[1] ,
														2,'COMMA',0,'POINT')}]] VND</h5>
												</div>
											</td>

											</tr>
									</table>
								</div>
							</div>
							<canvas id="revenue" width="100" height="50"></canvas>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>


	<script th:inline="javascript">
		function getRandomColor() {
			const colors = [
				"#FF5733", "#33FF57", "#5733FF", "#FF33A8", "#33A8FF",
				"#FFC733", "#33FFC7", "#C733FF", "#FF33E5", "#33E5FF",
				"#FF8233", "#33FF82", "#8233FF", "#FF33FA", "#33FAFF",
				"#FF3366", "#33FF66", "#3366FF", "#FF6699", "#6699FF",
				"#FF6699", "#99FF66", "#66FF99", "#FF9966", "#66FF99"
			];
			const randomColor = colors[Math.floor(Math.random() * colors.length)];
			return randomColor;
		}

		// begin draw chart getRevenuePerProduct 
		var dataRevenuePerProduct =/*[[${revenuePerProduct}]]*/[];
		var chartx = document.getElementById('getRevenuePerProduct').getContext('2d');
		var columnRevenuePerProduct = new Chart(chartx, {
			type: 'bar',
			data: {
				labels: dataRevenuePerProduct.map(row => row[1]),
				datasets: [{
					label: 'Revenue',
					data: dataRevenuePerProduct.map(row => row[2]),
					backgroundColor: getRandomColor(),
					borderColor: 'rgba(75, 192, 192, 1)',
					borderWidth: 1
				}]
			},
			options: {
				scales: {
					y: {
						beginAtZero: true,
					}
				}
			}
		});
		// end draw chart getRevenuePerProduct 

		// begin draw chart countProductSold
		var countProductSold = /*[[${countProductSold}]]*/[];
		var charty = document.getElementById('countProductSold').getContext('2d');
		var columnCountProductSold = new Chart(charty, {
			type: 'bar',
			data: {
				labels: countProductSold.map(row => row[1]),
				datasets: [{
					label: 'Quantity',
					data: countProductSold.map(row => row[2]),
					backgroundColor: getRandomColor(),
					borderColor: 'rgba(75, 192, 192, 1)',
					borderWidth: 1
				}]
			},
			options: {
				scales: {
					y: {
						beginAtZero: true,
					}
				}
			}
		});
		// end draw chart countProductSold

		// begin draw chart totalAmountPaid
		var dataTotalAmountPaid = /*[[${totalAmountPaid}]]*/[];
		var chartz = document.getElementById('totalAmountPaid').getContext('2d');
		var columnTotalAmountPaid = new Chart(chartz, {
			type: 'bar',
			data: {
				labels: dataTotalAmountPaid.map(row => row[1]),
				datasets: [{
					label: 'Total Amount Paid',
					data: dataTotalAmountPaid.map(row => row[3]),
					backgroundColor: getRandomColor(),
					borderColor: 'rgba(75, 192, 192, 1)',
					borderWidth: 1
				}]
			},
			options: {
				scales: {
					y: {
						beginAtZero: true,
					}
				}
			}
		});
		// end draw chart totalAmountPaid

		// begin draw chart revenue
		var dataRevenue = /*[[${revenue}]]*/[];
		var chartr = document.getElementById('revenue').getContext('2d');
		var columnRevenue = new Chart(chartr, {
			type: 'line',
			data: {
				labels: dataRevenue.map(row => row[0]),
				datasets: [
					{
						label: 'Revenue',
						data: dataRevenue.map(row => row[1]),
						backgroundColor: getRandomColor(),
						borderColor: 'rgba(75, 192, 192, 1)',
						borderWidth: 1,
						fill: false
					}
				]
			},
			options: {
				scales: {
					y: {
						beginAtZero: true,
					}
				}
			}
		});
		// end draw chart revenue
	</script>
</body>

</html>